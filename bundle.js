(()=>{"use strict";class t{constructor(t,e,o){this.length=t,this.hits=[],this.position=o||[],this.column=e||[]}hit(t){this.position.includes(t)&&!this.hits.includes(t)&&this.hits.push(t)}isSunk(){return this.length===this.hits.length}}const e=(t,e,o,i)=>{const s=document.querySelector(e);t.initialize(),t.board.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add(o),e.classList.add(i),e.setAttribute("value",t),s.appendChild(e),e.value=t,e.textContent=t}))}))},o=(t,e,o,s)=>{i(e,o);const n=document.querySelector(`#${e}`);t.board.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add(o),e.classList.add(s),e.setAttribute("value",t),n.appendChild(e),e.value=t,e.textContent=t}))}))},i=(t,e)=>{const o=document.querySelector(`#${t}`);document.querySelectorAll(`.${e}`).forEach((t=>{o.removeChild(t)}))},s=(t,e,o,i)=>{let s=[];if(1!==t.length){for(let n=0;n<=(t.length-1)*i;n+=i){if(null===document.querySelector(`div[value="${e.target.value+n}"]`))return;document.querySelector(`div[value="${e.target.value+n}"]`).style.backgroundColor=o,s.push(e.target.value+n)}return s}};let n=!0,r="horizontal",l=1;const a=document.querySelector("#rotate"),c=(e,i)=>{let a=document.querySelectorAll(`#primary-container>.${r}`);console.log(a[1]);const h=new t(i,[0,0,0],[1,2,3]);3===i&&n&&(i+=1,n=!1),i<=0||(a.forEach((t=>t.addEventListener("mouseover",(n=>{s(h,n,"blue",l),t.addEventListener("click",(t=>{h.position=s(h,t,"yellow",l),h.column=(t=>{let e=[];for(let o=0;o<=t.length-1;o++)null!=t.position[o]&&e.push(Math.floor(t.position[o]/10));return e})(h),e.placeShip(h),o(e,"primary-container","player-grids",r),console.log(e),c(e,i-1)}))})))),a.forEach((t=>t.addEventListener("mouseout",(t=>{s(h,t,"black",l)})))))};a.addEventListener("click",(t=>{console.log("before change: "+r),"horizontal"===r?(r="vertical",l=10,console.log("inside h")):"vertical"===r&&(r="horizontal",l=1,console.log("inside v"))}));class h{constructor(t){this.board=t||[],this.missed=[[]],this.hits=[[]]}initialize(){let t=0;for(let e=0;e<10;e++){this.board[e]=[];for(let o=0;o<10;o++)this.board[e][o]=t,t++}}placeShip(t){let e=t.column,o=t.position;for(let t=0;t<o.length;t++)for(let i=0;i<o.length;i++)this.board[e[t]][this.board[e[t]].indexOf(o[i])]="x"}recieveAttack(t,e){"x"===this.board[t][e]?void 0===this.hits[t]?this.hits[t]=[e]:this.hits[t].push(e):void 0===this.missed[t]?this.missed[t]=[e]:this.missed[t].push(e)}}class d{constructor(){this.turn=!0,this.position=this.position}autoPlay(){return Math.floor(10*Math.random())}}(()=>{new d,new d;const i=new h,s=new h;e(i,"#primary-container","player-grids","horizontal"),e(s,"#secondary-container","ai-grids","horizontal"),c(i,5),(e=>{const i=new t(5,[0,0,0,0,0],[1,2,3,4,5]),s=new t(4,[7,7,7,7],[73,74,75,76]),n=new t(3,[2,2,2],[22,23,24]),r=new t(3,[4,4,4],[44,45,46]),l=new t(2,[8,9],[81,91]);e.placeShip(i),e.placeShip(s),e.placeShip(n),e.placeShip(r),e.placeShip(l),o(e,"secondary-container","ai-grids")})(s)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQ3ZDNEUsRUFBUSxJQUFJNUUsRUFBSyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsS0FDbEM2RSxFQUFRLElBQUk3RSxFQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUNsQzhFLEVBQVEsSUFBSTlFLEVBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsS0FFbkNvRCxFQUFVUyxVQUFVckIsR0FDcEJZLEVBQVVTLFVBQVVjLEdBQ3BCdkIsRUFBVVMsVUFBVWUsR0FDcEJ4QixFQUFVUyxVQUFVZ0IsR0FDcEJ6QixFQUFVUyxVQUFVaUIsR0FDcEI5QyxFQUFZb0IsRUFBVSxzQkFBc0IsV0FBVyxFR3RLdkQyQixDQUFjTCxFQUFRLEVBZTFCTSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9mYWN0b3JpZXMvU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NjcmlwdHMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzL0dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zY3JpcHRzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hpcHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsY29sdW1uLHBvc2l0aW9uKXtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuaGl0cyA9IFtdO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb258fFtdO1xuICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbnx8W107XG4gICAgICAgXG4gICAgfVxuICAgIGhpdChoaXRQb3NpdGlvbil7XG4gICAgICAgIGlmKHRoaXMucG9zaXRpb24uaW5jbHVkZXMoaGl0UG9zaXRpb24pJiYgISh0aGlzLmhpdHMuaW5jbHVkZXMoaGl0UG9zaXRpb24pKSl7XG4gICAgICAgICAgICB0aGlzLmhpdHMucHVzaChoaXRQb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgaXNTdW5rKCl7XG4gICAgICAgIGlmKHRoaXMubGVuZ3RoID09PSB0aGlzLmhpdHMubGVuZ3RoKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbiIsImltcG9ydCBHYW1lQm9hcmQgZnJvbSBcIi4uL2ZhY3Rvcmllcy9HYW1lQm9hcmRcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuLi9mYWN0b3JpZXMvU2hpcFwiO1xuXG5cbi8vIFRPRE86IEZpeCB2ZXJ0aWNhbCBzaGlwIG5vdCB3b3JraW5nXG4vL1RPRE86IEZpeCBwbGFjZW1lbnQgb2Ygc2hpcCBpbiB2ZXJ0aWNhbFxuZXhwb3J0IGNvbnN0IGNyZWF0ZUJvYXJkID0gKG5ld0JvYXJkLGlkLGNsYXNzTmFtZSxkaXJlY3Rpb24pPT57XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XG4gICAgbmV3Qm9hcmQuaW5pdGlhbGl6ZSgpO1xuICAgIGxldCBib2FyZCA9IG5ld0JvYXJkLmJvYXJkO1xuICAgIGJvYXJkLmZvckVhY2goZT0+e1xuICAgICAgICBlLmZvckVhY2goZT0+e1xuICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOyBcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGRpcmVjdGlvbik7IFxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndmFsdWUnLGUpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYudmFsdWUgPSBlO1xuICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gZTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCB1cGRhdGVCb2FyZCA9IChuZXdCb2FyZCxjb250YWluZXJJRCxncmlkSUQsZGlyZWN0aW9uKT0+e1xuICAgIHJlbW92ZUJvYXJkKGNvbnRhaW5lcklELGdyaWRJRCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y29udGFpbmVySUR9YCk7XG4gICAgbGV0IGJvYXJkID0gbmV3Qm9hcmQuYm9hcmQ7XG4gICAgYm9hcmQuZm9yRWFjaChlPT57XG4gICAgICAgIGUuZm9yRWFjaChlPT57XG4gICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGdyaWRJRCk7IFxuICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChkaXJlY3Rpb24pOyBcbiAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJyxlKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgICAgZGl2LnZhbHVlID0gZTtcbiAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IGU7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgICBcbiAgICB9KTtcblxuICAgIFxufVxuZXhwb3J0IGNvbnN0IHJlbW92ZUJvYXJkID0gKGNvbnRhaW5lcklELGdyaWRJRCk9PntcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjb250YWluZXJJRH1gKTtcbiAgICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Z3JpZElEfWApO1xuICAgIGdyaWQuZm9yRWFjaChlbGVtZW50PT4geyBcbiAgICAgICAgICAgIFxuICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgICBcbiAgICAgICBcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBjbGlja0V2ZW50ID0gKHBsYXllcixhaSk9PntcbiAgICBjb25zdCBncmlkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkcycpO1xuICAgIGdyaWRzLmZvckVhY2goZWxlbWVudD0+ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpPT57XG4gICAgICAgIGlmKHBsYXllci50dXJuKXtcbiAgICAgICAgICAgICBhaS50dXJuID0gdHJ1ZTtcbiAgICAgICAgICAgICBwbGF5ZXIudHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGxheWVyOiAnK2UudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnY2xpY2snKTtcbiAgICAgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgIH1lbHNlIGlmKGFpLnR1cm4pe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FpOiAnKyBhaS5hdXRvUGxheSgpKTtcbiAgICAgICAgICAgIGFpLnR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIHBsYXllci50dXJuID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH0pKTtcbn1cbmNvbnN0IGdldENvb3JkaW5hdGVzID0gKHNoaXAsZXZlbnQsY29sb3IsaW5jcmVtZW50KT0+e1xuICAgIFxuICAgIGxldCBjb29yZGluYXRlID0gW107XG4gICAgaWYoc2hpcC5sZW5ndGg9PT0xKXtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IobGV0IGk9MDtpPD0oc2hpcC5sZW5ndGgtMSkqaW5jcmVtZW50O2k9aStpbmNyZW1lbnQpeyBcbiAgICAgICAgaWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W3ZhbHVlPVwiJHtldmVudC50YXJnZXQudmFsdWUraX1cIl1gKT09PW51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdlt2YWx1ZT1cIiR7ZXZlbnQudGFyZ2V0LnZhbHVlK2l9XCJdYCkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XG4gICAgICAgIGNvb3JkaW5hdGUucHVzaChldmVudC50YXJnZXQudmFsdWUraSk7XG4gICAgXG4gICAgICAgXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuY29uc3QgZ2V0Q29sdW1ucyA9IChzaGlwKT0+e1xuICAgIGxldCBjb2x1bW5zID0gW107XG4gICAgZm9yKGxldCBpID0gMDsgaTw9c2hpcC5sZW5ndGgtMTsgaSsrKXtcbiAgICAgICAgaWYoc2hpcC5wb3NpdGlvbltpXSE9bnVsbCl7XG4gICAgICAgICAgICAgY29sdW1ucy5wdXNoKE1hdGguZmxvb3IoKHNoaXAucG9zaXRpb25baV0pLzEwKSk7XG4gICAgICAgIH1cblxuICAgICAgIFxuICAgIH1cbiAgIFxuICAgIHJldHVybiBjb2x1bW5zO1xufVxubGV0IGZsYWcgPSB0cnVlO1xuIGxldCBkaXJlY3Rpb24gPSAnaG9yaXpvbnRhbCc7XG4gbGV0IGluY3JlbWVudCA9IDE7XG4gY29uc3Qgcm90YXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JvdGF0ZScpO1xuZXhwb3J0IGNvbnN0IHJlbmRlclBsYXllclNoaXBzID0gIChnYW1lYm9hcmQsbGVuZ3RoKSA9PntcbiAgICBcbiAgIFxuICAgIGxldCBncmlkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCNwcmltYXJ5LWNvbnRhaW5lcj4uJHtkaXJlY3Rpb259YCk7XG4gICAgY29uc29sZS5sb2coZ3JpZHNbMV0pO1xuICAgIFxuICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChsZW5ndGgsWzAsMCwwXSxbMSwyLDNdKTtcbiAgICBpZihsZW5ndGg9PT0zKXtcbiAgICAgICAgaWYoZmxhZyl7XG4gICAgICAgICAgIGxlbmd0aCs9MTsgXG4gICAgICAgICAgIGZsYWc9ZmFsc2U7XG4gICAgICAgIH0gXG4gICAgfVxuICAgIGlmKGxlbmd0aDw9MCl7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgZ3JpZHMuZm9yRWFjaChlbGVtZW50PT5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsKGUpPT57XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGdldENvb3JkaW5hdGVzKHNoaXAsZSwnYmx1ZScsaW5jcmVtZW50KVxuICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSk9PntcbiAgICAgICAgICAgICAgIHNoaXAucG9zaXRpb24gPSBnZXRDb29yZGluYXRlcyhzaGlwLGUsJ3llbGxvdycsaW5jcmVtZW50KTtcbiAgICAgICAgICAgICAgIHNoaXAuY29sdW1uID0gZ2V0Q29sdW1ucyhzaGlwKTtcbiAgICAgICAgICAgICAgICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwKTtcbiAgICAgICAgICAgICAgICAgdXBkYXRlQm9hcmQoZ2FtZWJvYXJkLCdwcmltYXJ5LWNvbnRhaW5lcicsXCJwbGF5ZXItZ3JpZHNcIixkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhnYW1lYm9hcmQpO1xuICAgICAgICAgICAgICAgICByZW5kZXJQbGF5ZXJTaGlwcyhnYW1lYm9hcmQsbGVuZ3RoLTEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgIFxuICAgICAgICAgICBcbiAgICAgICAgICBcbiAgICB9KSk7XG4gICAgXG5cbiAgICBncmlkcy5mb3JFYWNoKGVsZW1lbnQ9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLChlKT0+e1xuICAgICAgICBnZXRDb29yZGluYXRlcyhzaGlwLGUsJ2JsYWNrJyxpbmNyZW1lbnQpO1xuICAgIH0pKTsgIFxuICAgIFxuICAgXG4gICBcbn1cbiByb3RhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+e1xuICAgICAgICBjb25zb2xlLmxvZyhcImJlZm9yZSBjaGFuZ2U6IFwiKyBkaXJlY3Rpb24pO1xuICAgICAgICBpZihkaXJlY3Rpb24gPT09J2hvcml6b250YWwnKXtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCc7XG4gICAgICAgICAgICBpbmNyZW1lbnQgPSAxMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luc2lkZSBoJyk7XG4gICAgICAgIH1lbHNlIGlmKGRpcmVjdGlvbiA9PT0ndmVydGljYWwnKXtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdob3Jpem9udGFsJztcbiAgICAgICAgICAgIGluY3JlbWVudCA9IDE7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luc2lkZSB2Jyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH0pO1xuXG5cblxuXG5cbmV4cG9ydCBjb25zdCByZW5kZXJBaVNoaXBzID0gIChnYW1lYm9hcmQpID0+e1xuICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcCg1LFswLDAsMCwwLDBdLFsxLDIsMyw0LDVdKTtcbiAgICBjb25zdCBzaGlwMiA9IG5ldyBTaGlwKDQsWzcsNyw3LDddLFs3Myw3NCw3NSw3Nl0pO1xuICAgIGNvbnN0IHNoaXAzID0gbmV3IFNoaXAoMyxbMiwyLDJdLFsyMiwyMywyNF0pO1xuICAgIGNvbnN0IHNoaXA0ID0gbmV3IFNoaXAoMyxbNCw0LDRdLFs0NCw0NSw0Nl0pO1xuICAgIGNvbnN0IHNoaXA1ID0gbmV3IFNoaXAoMixbOCw5XSxbODEsOTFdKTtcbiAgICBcbiAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXApO1xuICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcDIpO1xuICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcDMpO1xuICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcDQpO1xuICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcDUpO1xuICAgIHVwZGF0ZUJvYXJkKGdhbWVib2FyZCwnc2Vjb25kYXJ5LWNvbnRhaW5lcicsXCJhaS1ncmlkc1wiKTtcbn1cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQm9hcmQge1xuICBjb25zdHJ1Y3Rvcihib2FyZCkge1xuICAgIHRoaXMuYm9hcmQgPSBib2FyZCB8fCBbXTtcbiAgICB0aGlzLm1pc3NlZCA9IFtbXV07XG4gICAgdGhpcy5oaXRzID0gW1tdXTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIHRoaXMuYm9hcmRbaV0gPSBbXTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICB0aGlzLmJvYXJkW2ldW2pdID0gY291bnQ7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGxhY2VTaGlwKHNoaXApIHtcbiAgICBsZXQgY29sdW1uID0gc2hpcC5jb2x1bW47XG4gICAgbGV0IHBvc2l0aW9uID0gc2hpcC5wb3NpdGlvbjtcbiAgICBmb3IobGV0IGk9MDsgaTxwb3NpdGlvbi5sZW5ndGg7aSsrKXtcbiAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBvc2l0aW9uLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRoaXMuYm9hcmRbY29sdW1uW2ldXVt0aGlzLmJvYXJkW2NvbHVtbltpXV0uaW5kZXhPZihwb3NpdGlvbltqXSldID0gJ3gnO1xuICAgICAgXG4gICAgfVxuICAgIH1cbiAgIFxuICAgIFxuICB9XG5cbiAgcmVjaWV2ZUF0dGFjayhjb2x1bW4sIHBvc2l0aW9uKSB7XG4gICAgaWYgKHRoaXMuYm9hcmRbY29sdW1uXVtwb3NpdGlvbl0gPT09IFwieFwiKSB7XG4gICAgICBpZiAodGhpcy5oaXRzW2NvbHVtbl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmhpdHNbY29sdW1uXSA9IFtwb3NpdGlvbl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhpdHNbY29sdW1uXS5wdXNoKHBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMubWlzc2VkW2NvbHVtbl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5taXNzZWRbY29sdW1uXSA9IFtwb3NpdGlvbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWlzc2VkW2NvbHVtbl0ucHVzaChwb3NpdGlvbik7XG4gICAgfVxuICB9XG4gXG59XG4iLCJleHBvcnQgY2xhc3MgUGxheWVye1xuICAgIGNvbnN0cnVjdG9yKCl7IFxuICAgICAgICB0aGlzLnR1cm4gPSB0cnVlO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICB9XG4gIFxuICAgIGF1dG9QbGF5KCl7XG4gICAgICAgIGxldCByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTApO1xuICAgICAgICByZXR1cm4gcmFuZG9tO1xuICAgIH1cbn0iLCJpbXBvcnQgR2FtZUJvYXJkIGZyb20gXCIuLi9mYWN0b3JpZXMvR2FtZUJvYXJkXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vZmFjdG9yaWVzL1BsYXllclwiXG5pbXBvcnQgU2hpcCBmcm9tIFwiLi4vZmFjdG9yaWVzL1NoaXBcIjtcbmltcG9ydCB7IGNsaWNrRXZlbnQsIGNyZWF0ZUJvYXJkLCByZW1vdmVCb2FyZCwgcmVuZGVyQWlTaGlwcywgcmVuZGVyUGxheWVyU2hpcHMsIHVwZGF0ZUJvYXJkIH0gZnJvbSBcIi4vZG9tXCI7XG5cbmV4cG9ydCBjb25zdCBydW5HYW1lID0gKCk9PntcbiAgICBjb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gICAgY29uc3QgYWkgPSBuZXcgUGxheWVyKCk7XG4gICAgY29uc3QgcGxheWVyQm9hcmQgPSBuZXcgR2FtZUJvYXJkKCk7XG4gICAgY29uc3QgYWlCb2FyZCA9IG5ldyBHYW1lQm9hcmQoKTtcbiAgICBcbiAgICBjcmVhdGVCb2FyZChwbGF5ZXJCb2FyZCwnI3ByaW1hcnktY29udGFpbmVyJywncGxheWVyLWdyaWRzJywnaG9yaXpvbnRhbCcpO1xuICAgIGNyZWF0ZUJvYXJkKGFpQm9hcmQsJyNzZWNvbmRhcnktY29udGFpbmVyJywnYWktZ3JpZHMnLCdob3Jpem9udGFsJyk7XG4gICAgIHJlbmRlclBsYXllclNoaXBzKHBsYXllckJvYXJkLDUpOyBcbiAgICByZW5kZXJBaVNoaXBzKGFpQm9hcmQpO1xuICAgIC8vIHJlbmRlclNoaXBzKGdhbWVib2FyZCw0KTtcbiAgIC8vIHVwZGF0ZUJvYXJkKGdhbWVib2FyZCwncHJpbWFyeS1jb250YWluZXInLFwicGxheWVyLWdyaWRzXCIpO1xuICAgICBcbiAgICAvLyBmb3IobGV0IGkgPTA7aTw0OyBpKyspe1xuICAgICAgIFxuICAgIC8vICAgICByZW5kZXJTaGlwcyhnYW1lYm9hcmQsNCk7XG4gICAgLy8gfVxuICAgICBcbiAgICBcblxuICAgXG4gICAgLy8gIGNvbnNvbGUubG9nKGdhbWVib2FyZC5ib2FyZCk7XG4gICAgLy8gIGNsaWNrRXZlbnQocGxheWVyLGFpKTtcbn1cbnJ1bkdhbWUoKTsiXSwibmFtZXMiOlsiU2hpcCIsImNvbnN0cnVjdG9yIiwibGVuZ3RoIiwiY29sdW1uIiwicG9zaXRpb24iLCJ0aGlzIiwiaGl0cyIsImhpdCIsImhpdFBvc2l0aW9uIiwiaW5jbHVkZXMiLCJwdXNoIiwiaXNTdW5rIiwiY3JlYXRlQm9hcmQiLCJuZXdCb2FyZCIsImlkIiwiY2xhc3NOYW1lIiwiZGlyZWN0aW9uIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5pdGlhbGl6ZSIsImJvYXJkIiwiZm9yRWFjaCIsImUiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJ2YWx1ZSIsInRleHRDb250ZW50IiwidXBkYXRlQm9hcmQiLCJjb250YWluZXJJRCIsImdyaWRJRCIsInJlbW92ZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldENvb3JkaW5hdGVzIiwic2hpcCIsImV2ZW50IiwiY29sb3IiLCJpbmNyZW1lbnQiLCJjb29yZGluYXRlIiwiaSIsInRhcmdldCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmxhZyIsInJvdGF0ZUJ1dHRvbiIsInJlbmRlclBsYXllclNoaXBzIiwiZ2FtZWJvYXJkIiwiZ3JpZHMiLCJjb25zb2xlIiwibG9nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbHVtbnMiLCJNYXRoIiwiZmxvb3IiLCJnZXRDb2x1bW5zIiwicGxhY2VTaGlwIiwiR2FtZUJvYXJkIiwibWlzc2VkIiwiY291bnQiLCJqIiwiaW5kZXhPZiIsInJlY2lldmVBdHRhY2siLCJ1bmRlZmluZWQiLCJQbGF5ZXIiLCJ0dXJuIiwiYXV0b1BsYXkiLCJyYW5kb20iLCJwbGF5ZXJCb2FyZCIsImFpQm9hcmQiLCJzaGlwMiIsInNoaXAzIiwic2hpcDQiLCJzaGlwNSIsInJlbmRlckFpU2hpcHMiLCJydW5HYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==