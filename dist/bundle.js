(()=>{"use strict";class t{constructor(t,e,i){this.length=t,this.hits=[],this.position=i||[],this.column=e||[]}hit(t){this.position.includes(t)&&!this.hits.includes(t)&&this.hits.push(t)}isSunk(){return this.length===this.hits.length}}const e=(t,e,i,r)=>{const o=document.querySelector(e);t.board.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add(i),e.classList.add(r),e.setAttribute("value",t),o.appendChild(e),e.value=t,e.textContent=t}))}))},i=(t,e,i,o)=>{r(e,i);const s=document.querySelector(`#${e}`);t.board.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add(i),e.classList.add(o),e.setAttribute("value",t),s.appendChild(e),e.value=t,e.textContent=t}))}))},r=(t,e)=>{const i=document.querySelector(`#${t}`);document.querySelectorAll(`.${e}`).forEach((t=>{i.removeChild(t)}))},o=(t,e,i,r)=>{let o=[];if(1!==t.length){for(let s=0;s<=(t.length-1)*r;s+=r){if(e.target.value+s=="x0")return;if(null===document.querySelector(`div[value="${e.target.value+s}"]`))return;if(e.target.value+s=="x0")return;document.querySelector(`div[value="${e.target.value+s}"]`).style.backgroundColor=i,o.push(e.target.value+s)}return o}};let s=!0,n="horizontal",a=1;const l=document.querySelector("#rotate"),c=(e,r)=>{let l=document.querySelectorAll(`.player-grids.${n}`);const h=new t(r,[0,0,0],[1,2,3]);3===r&&s&&(r+=1,s=!1),r<=0||(l.forEach((t=>t.addEventListener("mouseover",(s=>{o(h,s,"blue",a),t.addEventListener("click",(t=>{h.position=o(h,t,"gray",a),h.column=(t=>{let e=[];for(let i=0;i<=t.length-1;i++)t.position[i]&&e.push(Math.floor(t.position[i]/10));return e})(h),e.placeShip(h),i(e,"primary-container","player-grids",n),Array.from(document.querySelectorAll(".player-grids")).filter((t=>"x"===t.value)).forEach((t=>t.style.backgroundColor="transparent")),c(e,r-1)}))})))),l.forEach((t=>t.addEventListener("mouseout",(t=>{o(h,t,"gray",a)})))))};l.addEventListener("click",(t=>{"horizontal"===n?(n="vertical",a=10):"vertical"===n&&(n="horizontal",a=1)}));class h{constructor(t){this.board=t||[],this.missed=[[]],this.hits=[[]]}initialize(t){for(let e=0;e<10;e++){this.board[e]=[];for(let i=0;i<10;i++)this.board[e][i]=t,t++}}placeShip(t){let e=t.column,i=t.position;for(let t=0;t<i.length;t++)for(let r=0;r<i.length;r++)this.board[e[t]][this.board[e[t]].indexOf(i[r])]="x"}recieveAttack(t,e){"x"===this.board[t][e]?void 0===this.hits[t]?this.hits[t]=[e]:this.hits[t].push(e):void 0===this.missed[t]?this.missed[t]=[e]:this.missed[t].push(e)}}class u{constructor(){this.turn=!0,this.position=this.position}autoPlay(){return Math.floor(10*Math.random())}}(()=>{new u,new u;const r=new h,o=new h;r.initialize(0),o.initialize(100),e(r,"#primary-container","player-grids","horizontal"),e(o,"#secondary-container","ai-grids","x"),c(r,5),(e=>{const r=new t(5,[0,0,0,0,0],[100,102,103,104,105]),o=new t(4,[7,7,7,7],[173,174,175,176]),s=new t(3,[2,2,2],[122,123,124]),n=new t(3,[4,4,4],[144,145,146]),a=new t(2,[8,9],[181,191]);e.placeShip(r),e.placeShip(o),e.placeShip(s),e.placeShip(n),e.placeShip(a),i(e,"secondary-container","ai-grids")})(o)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxNQUMvQzRFLEVBQVEsSUFBSTVFLEVBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksSUFBSSxNQUMxQzZFLEVBQVEsSUFBSTdFLEVBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsSUFBSSxJQUFJLE1BQ3BDOEUsRUFBUSxJQUFJOUUsRUFBSyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksTUFDcEMrRSxFQUFRLElBQUkvRSxFQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLE1BRXBDbUQsRUFBVU8sVUFBVW5CLEdBQ3BCWSxFQUFVTyxVQUFVa0IsR0FDcEJ6QixFQUFVTyxVQUFVbUIsR0FDcEIxQixFQUFVTyxVQUFVb0IsR0FDcEIzQixFQUFVTyxVQUFVcUIsR0FDcEJoRCxFQUFZb0IsRUFBVSxzQkFBc0IsV0FBVyxFRzVMdkQ2QixDQUFjTCxFQUFRLEVBZTFCTSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9mYWN0b3JpZXMvU2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NjcmlwdHMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzL0dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zY3JpcHRzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hpcHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsY29sdW1uLHBvc2l0aW9uKXtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuaGl0cyA9IFtdO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb258fFtdO1xuICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbnx8W107XG4gICAgICAgXG4gICAgfVxuICAgIGhpdChoaXRQb3NpdGlvbil7XG4gICAgICAgIGlmKHRoaXMucG9zaXRpb24uaW5jbHVkZXMoaGl0UG9zaXRpb24pJiYgISh0aGlzLmhpdHMuaW5jbHVkZXMoaGl0UG9zaXRpb24pKSl7XG4gICAgICAgICAgICB0aGlzLmhpdHMucHVzaChoaXRQb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgaXNTdW5rKCl7XG4gICAgICAgIGlmKHRoaXMubGVuZ3RoID09PSB0aGlzLmhpdHMubGVuZ3RoKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbiIsImltcG9ydCBHYW1lQm9hcmQgZnJvbSBcIi4uL2ZhY3Rvcmllcy9HYW1lQm9hcmRcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuLi9mYWN0b3JpZXMvU2hpcFwiO1xuXG5cbi8vIFRPRE86IEZpeCBzaGlwIGlzc3VlIHdoZXJlIHNoaXAgcGxhY2VtZW50IG92ZXJsYXBcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUJvYXJkID0gKG5ld0JvYXJkLGlkLGNsYXNzTmFtZSxkaXJlY3Rpb24pPT57XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XG4gICAgLy9uZXdCb2FyZC5pbml0aWFsaXplKCk7XG4gICAgbGV0IGJvYXJkID0gbmV3Qm9hcmQuYm9hcmQ7XG4gICAgYm9hcmQuZm9yRWFjaChlPT57XG4gICAgICAgIGUuZm9yRWFjaChlPT57XG4gICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7IFxuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoZGlyZWN0aW9uKTsgXG4gICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCd2YWx1ZScsZSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICAgIGRpdi52YWx1ZSA9IGU7XG4gICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBlO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IHVwZGF0ZUJvYXJkID0gKG5ld0JvYXJkLGNvbnRhaW5lcklELGdyaWRJRCxkaXJlY3Rpb24pPT57XG4gICAgcmVtb3ZlQm9hcmQoY29udGFpbmVySUQsZ3JpZElEKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjb250YWluZXJJRH1gKTtcbiAgICBsZXQgYm9hcmQgPSBuZXdCb2FyZC5ib2FyZDtcbiAgICBib2FyZC5mb3JFYWNoKGU9PntcbiAgICAgICAgZS5mb3JFYWNoKGU9PntcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoZ3JpZElEKTsgXG4gICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGRpcmVjdGlvbik7IFxuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgndmFsdWUnLGUpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgICBkaXYudmFsdWUgPSBlO1xuICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICAgXG4gICAgfSk7XG5cbiAgICBcbn1cbmV4cG9ydCBjb25zdCByZW1vdmVCb2FyZCA9IChjb250YWluZXJJRCxncmlkSUQpPT57XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y29udGFpbmVySUR9YCk7XG4gICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2dyaWRJRH1gKTtcbiAgICBncmlkLmZvckVhY2goZWxlbWVudD0+IHsgXG4gICAgICAgICAgICBcbiAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgXG4gICAgICAgXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgY2xpY2tFdmVudCA9IChwbGF5ZXIsYWkpPT57XG4gICAgY29uc3QgZ3JpZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZHMnKTtcbiAgICBncmlkcy5mb3JFYWNoKGVsZW1lbnQ9PmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKT0+e1xuICAgICAgICBpZihwbGF5ZXIudHVybil7XG4gICAgICAgICAgICAgYWkudHVybiA9IHRydWU7XG4gICAgICAgICAgICAgcGxheWVyLnR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsYXllcjogJytlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoJ2NsaWNrJyk7XG4gICAgICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICB9ZWxzZSBpZihhaS50dXJuKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhaTogJysgYWkuYXV0b1BsYXkoKSk7XG4gICAgICAgICAgICBhaS50dXJuID0gZmFsc2U7XG4gICAgICAgICAgICBwbGF5ZXIudHVybiA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KSk7XG59XG5jb25zdCBnZXRDb29yZGluYXRlcyA9IChzaGlwLGV2ZW50LGNvbG9yLGluY3JlbWVudCk9PntcbiAgICBcbiAgICBsZXQgY29vcmRpbmF0ZSA9IFtdO1xuICAgIGlmKHNoaXAubGVuZ3RoPT09MSl7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yKGxldCBpPTA7aTw9KHNoaXAubGVuZ3RoLTEpKmluY3JlbWVudDtpPWkraW5jcmVtZW50KXsgXG4gICAgICAgICBcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LnZhbHVlK2k9PSd4MCcpe1xuICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbdmFsdWU9XCIke2V2ZW50LnRhcmdldC52YWx1ZStpfVwiXWApPT09bnVsbCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1lbHNlIGlmKChldmVudC50YXJnZXQudmFsdWUraSk9PSd4MCcpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W3ZhbHVlPVwiJHtldmVudC50YXJnZXQudmFsdWUraX1cIl1gKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICAgICAgY29vcmRpbmF0ZS5wdXNoKGV2ZW50LnRhcmdldC52YWx1ZStpKTtcbiAgICAgICAgXG4gICAgICAgXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuY29uc3QgZ2V0Q29sdW1ucyA9IChzaGlwKT0+e1xuICAgIGxldCBjb2x1bW5zID0gW107XG4gICAgZm9yKGxldCBpID0gMDsgaTw9c2hpcC5sZW5ndGgtMTsgaSsrKXtcbiAgICAgICAgXG4gICAgICAgIGlmKHNoaXAucG9zaXRpb25baV0pe1xuICAgICAgICAgICAgIGNvbHVtbnMucHVzaChNYXRoLmZsb29yKChzaGlwLnBvc2l0aW9uW2ldKS8xMCkpO1xuICAgICAgICB9XG5cbiAgICAgICBcbiAgICB9XG4gIFxuICAgIHJldHVybiBjb2x1bW5zO1xufVxuY29uc3QgY2hhbmdlQ29sb3IgPSAoKSA9PntcbiAgICBjb25zdCBzZWxlY3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbGF5ZXItZ3JpZHMnKSk7XG4gICAgc2VsZWN0LmZpbHRlcihlbGVtZW50PT5lbGVtZW50LnZhbHVlPT09J3gnKS5mb3JFYWNoKGVsZW1lbnQ9PmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50Jyk7XG4gICAgXG4gICAgXG59XG5sZXQgZmxhZyA9IHRydWU7XG4gbGV0IGRpcmVjdGlvbiA9ICdob3Jpem9udGFsJztcbiBsZXQgaW5jcmVtZW50ID0gMTtcbiBjb25zdCByb3RhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm90YXRlJyk7XG5cbmV4cG9ydCBjb25zdCByZW5kZXJQbGF5ZXJTaGlwcyA9ICAoZ2FtZWJvYXJkLGxlbmd0aCkgPT57XG4gICAgXG4gICBcbiAgICBsZXQgZ3JpZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAucGxheWVyLWdyaWRzLiR7ZGlyZWN0aW9ufWApO1xuICAgIFxuICAgIFxuICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChsZW5ndGgsWzAsMCwwXSxbMSwyLDNdKTtcbiAgICBcbiAgICBpZihsZW5ndGg9PT0zKXtcbiAgICAgICAgaWYoZmxhZyl7XG4gICAgICAgICAgIGxlbmd0aCs9MTsgXG4gICAgICAgICAgIGZsYWc9ZmFsc2U7XG4gICAgICAgIH0gXG4gICAgfVxuICAgIGlmKGxlbmd0aDw9MCl7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgZ3JpZHMuZm9yRWFjaChlbGVtZW50PT5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsKGUpPT57XG4gICAgICAgICAgICAgZ2V0Q29vcmRpbmF0ZXMoc2hpcCxlLCdibHVlJyxpbmNyZW1lbnQpO1xuICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSk9PntcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICBzaGlwLnBvc2l0aW9uID0gZ2V0Q29vcmRpbmF0ZXMoc2hpcCxlLCdncmF5JyxpbmNyZW1lbnQpO1xuICAgICAgICAgICAgICAgc2hpcC5jb2x1bW4gPSBnZXRDb2x1bW5zKHNoaXApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBnYW1lYm9hcmQucGxhY2VTaGlwKHNoaXApO1xuICAgICAgICAgICAgICAgICB1cGRhdGVCb2FyZChnYW1lYm9hcmQsJ3ByaW1hcnktY29udGFpbmVyJyxcInBsYXllci1ncmlkc1wiLGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VDb2xvcigpO1xuICAgICAgICAgICAgICAgICByZW5kZXJQbGF5ZXJTaGlwcyhnYW1lYm9hcmQsbGVuZ3RoLTEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgXG4gICAgICAgICAgXG4gICAgfSkpO1xuICAgIFxuXG4gICAgZ3JpZHMuZm9yRWFjaChlbGVtZW50PT5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywoZSk9PntcbiAgICAgICAgZ2V0Q29vcmRpbmF0ZXMoc2hpcCxlLCdncmF5JyxpbmNyZW1lbnQpO1xuICAgIH0pKTsgIFxuICAgIFxuICAgXG4gICBcbn1cblxuIHJvdGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpPT57XG4gICAgICBcbiAgICAgICAgaWYoZGlyZWN0aW9uID09PSdob3Jpem9udGFsJyl7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAndmVydGljYWwnO1xuICAgICAgICAgICAgaW5jcmVtZW50ID0gMTA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZSBpZihkaXJlY3Rpb24gPT09J3ZlcnRpY2FsJyl7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAnaG9yaXpvbnRhbCc7XG4gICAgICAgICAgICBpbmNyZW1lbnQgPSAxO1xuICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9KTtcblxuXG5cblxuXG5leHBvcnQgY29uc3QgcmVuZGVyQWlTaGlwcyA9ICAoZ2FtZWJvYXJkKSA9PntcbiAgICBjb25zdCBzaGlwID0gbmV3IFNoaXAoNSxbMCwwLDAsMCwwXSxbMTAwLDEwMiwxMDMsMTA0LDEwNV0pO1xuICAgIGNvbnN0IHNoaXAyID0gbmV3IFNoaXAoNCxbNyw3LDcsN10sWzE3MywxNzQsMTc1LDE3Nl0pO1xuICAgIGNvbnN0IHNoaXAzID0gbmV3IFNoaXAoMyxbMiwyLDJdLFsxMjIsMTIzLDEyNF0pO1xuICAgIGNvbnN0IHNoaXA0ID0gbmV3IFNoaXAoMyxbNCw0LDRdLFsxNDQsMTQ1LDE0Nl0pO1xuICAgIGNvbnN0IHNoaXA1ID0gbmV3IFNoaXAoMixbOCw5XSxbMTgxLDE5MV0pO1xuICAgIFxuICAgIGdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcCk7XG4gICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwMik7XG4gICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwMyk7XG4gICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwNCk7XG4gICAgZ2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwNSk7XG4gICAgdXBkYXRlQm9hcmQoZ2FtZWJvYXJkLCdzZWNvbmRhcnktY29udGFpbmVyJyxcImFpLWdyaWRzXCIpO1xufVxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVCb2FyZCB7XG4gIGNvbnN0cnVjdG9yKGJvYXJkKSB7XG4gICAgdGhpcy5ib2FyZCA9IGJvYXJkIHx8IFtdO1xuICAgIHRoaXMubWlzc2VkID0gW1tdXTtcbiAgICB0aGlzLmhpdHMgPSBbW11dO1xuICB9XG5cbiAgaW5pdGlhbGl6ZShjb3VudCkge1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgdGhpcy5ib2FyZFtpXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIHRoaXMuYm9hcmRbaV1bal0gPSBjb3VudDtcbiAgICAgICAgY291bnQrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG5cblxuICBwbGFjZVNoaXAoc2hpcCkge1xuICAgIGxldCBjb2x1bW4gPSBzaGlwLmNvbHVtbjtcbiAgICBsZXQgcG9zaXRpb24gPSBzaGlwLnBvc2l0aW9uO1xuICAgIGZvcihsZXQgaT0wOyBpPHBvc2l0aW9uLmxlbmd0aDtpKyspe1xuICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcG9zaXRpb24ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdGhpcy5ib2FyZFtjb2x1bW5baV1dW3RoaXMuYm9hcmRbY29sdW1uW2ldXS5pbmRleE9mKHBvc2l0aW9uW2pdKV0gPSAneCc7XG4gICAgICBcbiAgICB9XG4gICAgfVxuICAgXG4gICAgXG4gIH1cblxuICByZWNpZXZlQXR0YWNrKGNvbHVtbiwgcG9zaXRpb24pIHtcbiAgICBpZiAodGhpcy5ib2FyZFtjb2x1bW5dW3Bvc2l0aW9uXSA9PT0gXCJ4XCIpIHtcbiAgICAgIGlmICh0aGlzLmhpdHNbY29sdW1uXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuaGl0c1tjb2x1bW5dID0gW3Bvc2l0aW9uXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGl0c1tjb2x1bW5dLnB1c2gocG9zaXRpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5taXNzZWRbY29sdW1uXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm1pc3NlZFtjb2x1bW5dID0gW3Bvc2l0aW9uXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5taXNzZWRbY29sdW1uXS5wdXNoKHBvc2l0aW9uKTtcbiAgICB9XG4gIH1cbiBcbn1cbiIsImV4cG9ydCBjbGFzcyBQbGF5ZXJ7XG4gICAgY29uc3RydWN0b3IoKXsgXG4gICAgICAgIHRoaXMudHVybiA9IHRydWU7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgIH1cbiAgXG4gICAgYXV0b1BsYXkoKXtcbiAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMCk7XG4gICAgICAgIHJldHVybiByYW5kb207XG4gICAgfVxufSIsImltcG9ydCBHYW1lQm9hcmQgZnJvbSBcIi4uL2ZhY3Rvcmllcy9HYW1lQm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9mYWN0b3JpZXMvUGxheWVyXCJcbmltcG9ydCBTaGlwIGZyb20gXCIuLi9mYWN0b3JpZXMvU2hpcFwiO1xuaW1wb3J0IHsgY2xpY2tFdmVudCwgY3JlYXRlQm9hcmQsIHJlbW92ZUJvYXJkLCByZW5kZXJBaVNoaXBzLCByZW5kZXJQbGF5ZXJTaGlwcywgdXBkYXRlQm9hcmQgfSBmcm9tIFwiLi9kb21cIjtcblxuZXhwb3J0IGNvbnN0IHJ1bkdhbWUgPSAoKT0+e1xuICAgIGNvbnN0IHBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgICBjb25zdCBhaSA9IG5ldyBQbGF5ZXIoKTtcbiAgICBjb25zdCBwbGF5ZXJCb2FyZCA9IG5ldyBHYW1lQm9hcmQoKTtcbiAgICBjb25zdCBhaUJvYXJkID0gbmV3IEdhbWVCb2FyZCgpO1xuICAgIHBsYXllckJvYXJkLmluaXRpYWxpemUoMCk7XG4gICAgYWlCb2FyZC5pbml0aWFsaXplKDEwMCk7XG4gICAgY3JlYXRlQm9hcmQocGxheWVyQm9hcmQsJyNwcmltYXJ5LWNvbnRhaW5lcicsJ3BsYXllci1ncmlkcycsJ2hvcml6b250YWwnKTtcbiAgICBjcmVhdGVCb2FyZChhaUJvYXJkLCcjc2Vjb25kYXJ5LWNvbnRhaW5lcicsJ2FpLWdyaWRzJywneCcpO1xuICAgICByZW5kZXJQbGF5ZXJTaGlwcyhwbGF5ZXJCb2FyZCw1KTsgXG4gICAgcmVuZGVyQWlTaGlwcyhhaUJvYXJkKTtcbiAgICAvLyByZW5kZXJTaGlwcyhnYW1lYm9hcmQsNCk7XG4gICAvLyB1cGRhdGVCb2FyZChnYW1lYm9hcmQsJ3ByaW1hcnktY29udGFpbmVyJyxcInBsYXllci1ncmlkc1wiKTtcbiAgICAgXG4gICAgLy8gZm9yKGxldCBpID0wO2k8NDsgaSsrKXtcbiAgICAgICBcbiAgICAvLyAgICAgcmVuZGVyU2hpcHMoZ2FtZWJvYXJkLDQpO1xuICAgIC8vIH1cbiAgICAgXG4gICAgXG5cbiAgIFxuICAgIC8vICBjb25zb2xlLmxvZyhnYW1lYm9hcmQuYm9hcmQpO1xuICAgIC8vICBjbGlja0V2ZW50KHBsYXllcixhaSk7XG59XG5ydW5HYW1lKCk7Il0sIm5hbWVzIjpbIlNoaXAiLCJjb25zdHJ1Y3RvciIsImxlbmd0aCIsImNvbHVtbiIsInBvc2l0aW9uIiwidGhpcyIsImhpdHMiLCJoaXQiLCJoaXRQb3NpdGlvbiIsImluY2x1ZGVzIiwicHVzaCIsImlzU3VuayIsImNyZWF0ZUJvYXJkIiwibmV3Qm9hcmQiLCJpZCIsImNsYXNzTmFtZSIsImRpcmVjdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvYXJkIiwiZm9yRWFjaCIsImUiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJ2YWx1ZSIsInRleHRDb250ZW50IiwidXBkYXRlQm9hcmQiLCJjb250YWluZXJJRCIsImdyaWRJRCIsInJlbW92ZUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsImdldENvb3JkaW5hdGVzIiwic2hpcCIsImV2ZW50IiwiY29sb3IiLCJpbmNyZW1lbnQiLCJjb29yZGluYXRlIiwiaSIsInRhcmdldCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmxhZyIsInJvdGF0ZUJ1dHRvbiIsInJlbmRlclBsYXllclNoaXBzIiwiZ2FtZWJvYXJkIiwiZ3JpZHMiLCJhZGRFdmVudExpc3RlbmVyIiwiY29sdW1ucyIsIk1hdGgiLCJmbG9vciIsImdldENvbHVtbnMiLCJwbGFjZVNoaXAiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJHYW1lQm9hcmQiLCJtaXNzZWQiLCJpbml0aWFsaXplIiwiY291bnQiLCJqIiwiaW5kZXhPZiIsInJlY2lldmVBdHRhY2siLCJ1bmRlZmluZWQiLCJQbGF5ZXIiLCJ0dXJuIiwiYXV0b1BsYXkiLCJyYW5kb20iLCJwbGF5ZXJCb2FyZCIsImFpQm9hcmQiLCJzaGlwMiIsInNoaXAzIiwic2hpcDQiLCJzaGlwNSIsInJlbmRlckFpU2hpcHMiLCJydW5HYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==